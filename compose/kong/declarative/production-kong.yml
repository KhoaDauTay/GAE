_format_version: "2.1"
_transform: true


# Config Consumers and JWT for consumers

consumers:
- username: gmm

jwt_secrets:
- consumer: gmm
  algorithm: RS256
  key: GAE
  rsa_public_key: "-----BEGIN PUBLIC KEY-----\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEA1MtRnSG0FT5BvJWjrieH\nesissdmUVsxal/p8s+2AiV+TtxI2R6PGnFMMOsz1s3/Xs5cMdYml1voKowHNF0+x\nhMO63vh+VfQOOI4TLAQMAMJgacftWEuuj7PbZfER6hu4xtKhJyMxISKrhEkMhkNb\nr652clLP+elWjiHNnk5J6rzyj7WZmjeQIZafRtWkPhlOxlHJV/8iaIZwZ/igvAhh\nr8Hls0b6E5Y4BA1oCMhelSffUj/aGAQwAagUkRhY6SMJ00oMfk4WAXLLcAtPHMeG\nvRxMHawBddSr4ozNdqtVjNrWfK18r4o8sAc709rtdGdwLUlBgQQTovFc985A4rQ3\nOdVz0O0umT0WygSyOfnQPIea/ixuekYUl4O5uQie8WErh1STEYPZk0I0Rt5/fwYX\n6R5uHIIhU5M3GQXQoy8gnWzDhyeNnkxPT04a6QhdXMOPA+8ORcKtXONpgZMLZBAP\nK8egK6LxfRxLJ5vtnGbzgnZj7J5MiizsZDn3b80R8pltynEkKiPmALuVbuz6iEie\nON8TDCSI5R0VLr1AJXfjDJD7bS6WaIaB31HHfUtEZImD88VzgddqNBLcwy28IUBF\nwnoyjZPwlxQxJaOqBecR7zZrHYRHK0MjV9PHJB3X+m0R7JWpxhjjhdbuiANV3xNg\ngI7Qy8bSZgHl4DE5OdxheWsCAwEAAQ==\n-----END PUBLIC KEY-----\n%"

plugins:
- name: jwt
  enabled: yes
  service: api-service
  config:
    secret_is_base64: false
    header_names: ["Authorization"]
    key_claim_name: iss
    run_on_preflight: true
    claims_to_verify:
      - exp

- name: rate-limiting
  config:
    second: 5
    hour: 10000
    policy: local
    fault_tolerant: true
    hide_client_headers: false
    redis_ssl: false
    redis_ssl_verify: false

# Config for Proxy cache request
- name: proxy-cache
  config:
    response_code:
    - 200
    request_method:
    - GET
    - HEAD
    content_type:
    - text/plain
    - application/json
    cache_ttl: 300
    strategy: memory

# Config Services v√† Routes
certificates:
  - snis:
      - name: gae-gw.systems
    key: "-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDF9x1ZEvfvfTFo\nuBJtaml+dhagn8fiMWvYgUriMHGigAS9+85xDMdZQxX8RvIngDOGla2767jazbgz\n3N6GWkL7rGbSOO6zRI2c+EvZmTXnfXwiZJdDUjzCQKqXmNNpxXYFDj7v3lyOYNBv\nd3nmQeNOtrNw6ubJujAmB9JY23gOIogQyGDz1sTHULRfvPs+G+Xp7dhlfJ4DYXcz\nKRnLzDdcnlfmzaCu9e8qVvspP55KDbOC4qatmVw0XyG88HtooUPq10JuVLiWhP0M\nnzpr1R1MLuiA+zWLGzNQkJKNCY3rxjgVMWzgU04kbHZK8Wo4HlP04cWBe6/oFZIt\n/dyl4Ui1AgMBAAECggEAF2P42D75A5ePwHdLWhlCKLqMNuNaKzw6qWSxc+NUceZd\naRM5E7t2THI0RVAeqZMow2SpF/SkrVm0Q5B7zHUayADZT0qBzbWyY9MkpyvGpjj5\n81heVQqA+lTIs0vP4wX9SWCjCBWGax4+UoVT5mRvlqvYrOVcaoZwzPWMoYog985g\nLKmdUmtyOTNl1FPnDUBzhPu+/BEXJanbdSl/BQqu7EprpjGjmU5PtgefYrjMgtXG\njgqOkH6R2qmoLPAkKlUHTGb8IEEKzKyQ12o7E8Zf3R/NuMDvH1HfSs0JSijYApYt\nCLK9DhheoyEhN2ZnNrTk9L1kPIMsIuZA9zjqjnwqiwKBgQD7rkJdCFIJI3Bbq8Nd\nmy3wrBsQDLl9AxPQWomXEzjDCUvYLPh0yiwy8gGXzWPDuS+ZLEs1Ui8s3ZWWEBTh\nlcMY8hmcEX5MC8OBVWHt+KX/WhRPVhPPA7Lo7lFo4w0yVZG8ceou/K6qcXkoIOei\np5Ym3xbvyoQnY3Zp91gr2Z8yXwKBgQDJXNxV3+OYB5kI/OoMalSqmB4xiIPP3RPo\nkZyco4bPY9uAYiGt2rUr3m6yxig28pVbp4CP0falMK9u/heeLAYy/bDBahKTKlt5\n5eryS5Axawgjr+Hu5JqJvM2/Wmft6Zv07Cqi8Uykgk9y1+FTr4njzaCeNc340gkJ\nQOqP1yClawKBgQDFRoBKP/1doGOv12DZfItz/NNxryetr73WMUFsI+r4Jc9HcWiG\n0vn2LO/Gt32dqwh+PdPtxa+osT9RUuWrNSKp6Qrd5HBk10u1kuGiEKa9EzScQ1Jf\nj/yqzDMPzflIHP6RAZGYpwOaIjvfkns+abIuYeuupcUUwsfMo85/AKPibQKBgAHx\nG07YseEtcZRcnAUyoU5j2SaxIlRG1YJQpSn9ibdGRz+dsqVyjny10Gt47bpZ7IbN\nvrekVrSRG5/+Y0vrMMQdHi8/Tp6MsgUi6nkbsXBIj/OIJq2fFr5tS66kuIvazN43\nyNF5cjvD5fA9lLax4qqHuRzNeAcGP4APWDO6512xAoGBAPTXISziiAHL22BFdcZH\nSoZw7ci7gKq1qbHJgD8GmrNIC24520KR2GEckFVBCdOiW+anSjQrPE8GtZbdlsEC\nN0zABYHwbbRCzi6K/Ilx/3YuIZaz4RG0ABr5neJmv6gsPjBWQdtXeMjSYNRALHu6\nbk2x5RIEcRXNjb8F8ijqiVP8\n-----END PRIVATE KEY-----\n"
    cert: "-----BEGIN CERTIFICATE-----MIIEqDCCA5CgAwIBAgIUC+gJA4t2r56PCCMqkt3c341xBhIwDQYJKoZIhvcNAQELBQAwgYsxCzAJBgNVBAYTAlVTMRkwFwYDVQQKExBDbG91ZEZsYXJlLCBJbmMuMTQwMgYDVQQLEytDbG91ZEZsYXJlIE9yaWdpbiBTU0wgQ2VydGlmaWNhdGUgQXV0aG9yaXR5MRYwFAYDVQQHEw1TYW4gRnJhbmNpc2NvMRMwEQYDVQQIEwpDYWxpZm9ybmlhMB4XDTIyMDMwODA5NDQwMFoXDTM3MDMwNDA5NDQwMFowYjEZMBcGA1UEChMQQ2xvdWRGbGFyZSwgSW5jLjEdMBsGA1UECxMUQ2xvdWRGbGFyZSBPcmlnaW4gQ0ExJjAkBgNVBAMTHUNsb3VkRmxhcmUgT3JpZ2luIENlcnRpZmljYXRlMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxfcdWRL3730xaLgSbWppfnYWoJ/H4jFr2IFK4jBxooAEvfvOcQzHWUMV/EbyJ4AzhpWtu+u42s24M9zehlpC+6xm0jjus0SNnPhL2Zk15318ImSXQ1I8wkCql5jTacV2BQ4+795cjmDQb3d55kHjTrazcOrmybowJgfSWNt4DiKIEMhg89bEx1C0X7z7Phvl6e3YZXyeA2F3MykZy8w3XJ5X5s2grvXvKlb7KT+eSg2zguKmrZlcNF8hvPB7aKFD6tdCblS4loT9DJ86a9UdTC7ogPs1ixszUJCSjQmN68Y4FTFs4FNOJGx2SvFqOB5T9OHFgXuv6BWSLf3cpeFItQIDAQABo4IBKjCCASYwDgYDVR0PAQH/BAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMCBggrBgEFBQcDATAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBRwfWybgGwqxtRiV2LYYmFUrTLhszAfBgNVHSMEGDAWgBQk6FNXXXw0QIep65TbuuEWePwppDBABggrBgEFBQcBAQQ0MDIwMAYIKwYBBQUHMAGGJGh0dHA6Ly9vY3NwLmNsb3VkZmxhcmUuY29tL29yaWdpbl9jYTArBgNVHREEJDAighAqLmdhZS1ndy5zeXN0ZW1zgg5nYWUtZ3cuc3lzdGVtczA4BgNVHR8EMTAvMC2gK6AphidodHRwOi8vY3JsLmNsb3VkZmxhcmUuY29tL29yaWdpbl9jYS5jcmwwDQYJKoZIhvcNAQELBQADggEBAG/WI66M1Mo77vbSPaNCvErYcgK69aSUNzl0M6Xly9fbVaXvlIGdS1yXyy77Gp2zJJHf8zWJcDoWl8R1FnA/Sgq+/L6SahRJlZjn7aeOX4AXdRhraYK5vilDULuj/4bf2lcjrexl8/7nuyfmyFzsXacwppPusGVyCs647rjcdSM6FVzLU3TPFv51ebh9JoW+xiJtQLo5VSGnLtr+SPRdt3ioooGVoORjv04pkfsD7uFXRRG/Y4cH/3w0u6j8Zu9zI5eiJvGm8XIlGYBjWwC87Y4J7HcRzJAa5MScPo4fAvWfq8cyJsKMn+vtTcGwwRhayhCh62eXYdKo9T0M6yGIZeU=-----END CERTIFICATE--
---"
services:
- name: api-service
  host: gae-gw.systems
  port: 443
  connect_timeout: 60000
  protocol: https
  read_timeout: 60000
  retries: 5
  write_timeout: 60000
  routes:
    - name: api-route
      methods:
      - GET
      - POST
      - PUT
      - DELETE
      - PATCH
      paths:
        - /api
      protocols:
      - https
      regex_priority: 0
      strip_path: false
      preserve_host: false
